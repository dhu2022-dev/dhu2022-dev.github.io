---
const { items = [] } = Astro.props;
// items should be array of { id, title, year, rating, tags, ... , modalHtml }
---

<div style="border:1px solid #ddd; border-radius:18px; padding: 14px;">
  <div style="display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap; align-items:center; margin-bottom: 10px;">
    <div style="font-weight:600;">Cinematic Mode</div>
    <div style="display:flex; gap:8px;">
      <button id="creditsPause">Pause</button>
      <button id="creditsPlay" style="display:none;">Play</button>
    </div>
  </div>

  <div class="creditsViewport">
    <div class="creditsRoll" id="creditsRoll">
      <div style="height: 140px;"></div>

      <div style="text-align:center; margin: 14px 0;">
        <div style="font-size: 12px; letter-spacing:.2em; text-transform:uppercase; opacity:.7;">Favorite of all time</div>
      </div>

      {items.map((m) => (
        <button
          class="creditLine"
          data-modal={m.modalHtml}
          style="display:block; width:100%; background:transparent; border:0; color:inherit; padding:10px 0; cursor:pointer; text-align:center;"
        >
          <span style="font-weight:600;">{m.title}</span>
          {m.year ? <span style="opacity:.7;"> · {m.year}</span> : null}
          {m.rating ? <span style="opacity:.7;"> · {m.rating}/10</span> : null}
        </button>
      ))}

      <div style="height: 240px;"></div>
    </div>
  </div>

  <style>
    .creditsViewport {
      height: 420px;
      overflow: hidden;
      border-radius: 14px;
      background: linear-gradient(to bottom, #0b0b0b, #111);
      color: #fff;
      position: relative;
      border: 1px solid rgba(255,255,255,.12);
    }
    .creditsRoll {
      animation: roll 30s linear infinite;
      will-change: transform;
    }
    @keyframes roll {
      from { transform: translateY(0); }
      to { transform: translateY(-60%); }
    }
    .creditLine:hover { opacity: .85; }
  </style>

  <script>
    const roll = document.getElementById("creditsRoll");
    const pause = document.getElementById("creditsPause");
    const play = document.getElementById("creditsPlay");

    pause?.addEventListener("click", () => {
      roll.style.animationPlayState = "paused";
      pause.style.display = "none";
      play.style.display = "inline-block";
    });

    play?.addEventListener("click", () => {
      roll.style.animationPlayState = "running";
      play.style.display = "none";
      pause.style.display = "inline-block";
    });

    document.querySelectorAll(".creditLine").forEach((btn) => {
      btn.addEventListener("click", () => {
        const html = btn.getAttribute("data-modal") || "<p>No details yet.</p>";
        window.__openModal?.(html);
      });
    });
  </script>
</div>
