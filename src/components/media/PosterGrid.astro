---
const { items = [] } = Astro.props;
---

<div class="posterGrid">
  {items.map((it) => (
    <div class="posterCard">
      {it.poster ? (
        <img
          src={it.poster}
          alt={it.title}
          width="320"
          height="420"
          style="width:100%; height:auto; border-radius:12px; object-fit:cover;"
          loading="lazy"
        />
      ) : (
        <div class="posterPlaceholder"></div>
      )}

      <div class="posterInfo">
        <div class="posterTitle">{it.title}</div>
        {it.subtitle ? <div class="posterSubtitle">{it.subtitle}</div> : null}

        {it.tags && it.tags.length ? (
        <div class="posterTags">
            {it.tags.slice(0, 4).map((t) => (
            <span class="posterTag">{t}</span>
            ))}
        </div>
        ) : null}

      </div>
    </div>
  ))}
</div>

<style>
  .posterGrid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 1rem;
    margin-top: 1rem;
  }
  
  .posterCard {
    border: 1px solid #ddd;
    border-radius: 16px;
    padding: 0.75rem;
  }
  
  @media (prefers-color-scheme: dark) {
    .posterCard {
      border-color: #444;
    }
  }
  
  .posterInfo {
    margin-top: 0.75rem;
  }
  
  .posterTitle {
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    margin-bottom: 0.25rem;
  }
  
  .posterSubtitle {
    font-size: var(--font-size-sm);
    opacity: 0.75;
    margin-bottom: 0.5rem;
  }
  
  .posterTags {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
    margin-top: 0.5rem;
  }
  
  .posterTag {
    border: 1px solid #ddd;
    border-radius: 999px;
    padding: 0.25rem 0.5rem;
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
  }
  
  @media (prefers-color-scheme: dark) {
    .posterTag {
      border-color: #444;
    }
  }
  
  .posterPlaceholder {
    width: 100%;
    aspect-ratio: 3/4;
    background: #eee;
    border-radius: 12px;
  }
  
  @media (prefers-color-scheme: dark) {
    .posterPlaceholder {
      background: #333;
    }
  }
</style>
